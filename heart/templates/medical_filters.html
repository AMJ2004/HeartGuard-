<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <title>Medical Diet Restrictions</title>
  <style>
    .cat-title { font-weight: 600; }
    .why { color: #6c757d; font-size: 0.9rem; }
  </style>
  </head>
<body class="bg-light">
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <a class="navbar-brand" href="{{ url_for('index') }}">Heart Care</a>
  </nav>
  <div class="container py-4">
    <h3 class="mb-3">Foods To Avoid Based on Your Conditions</h3>

    <p class="text-muted">Select your condition(s) and review ingredients commonly filtered out from recipes, with reasons.</p>

    <form class="mb-4" method="get">
      <div class="form-row">
        <div class="form-group col-md-3">
          <label><strong>Conditions</strong></label>
          <select name="conditions" multiple class="form-control" size="3">
            <option value="diabetes" {% if 'diabetes' in selected %}selected{% endif %}>Diabetes</option>
            <option value="high_bp" {% if 'high_bp' in selected %}selected{% endif %}>High Blood Pressure</option>
            <option value="cholesterol" {% if 'cholesterol' in selected %}selected{% endif %}>High Cholesterol</option>
          </select>
          <small class="text-muted">Hold Ctrl (Cmd on Mac) to select multiple.</small>
        </div>
        <div class="form-group col-md-3 align-self-end">
          <button type="submit" class="btn btn-primary">Show Restrictions</button>
        </div>
      </div>
    </form>

    {% if sections %}
      {% for key, section in sections.items() %}
        <div class="card mb-3">
          <div class="card-header cat-title">{{ section.title }}</div>
          <div class="card-body p-0">
            <table class="table mb-0 table-sm">
              <thead>
                <tr>
                  <th style="width:40%">Avoid</th>
                  <th>Why</th>
                </tr>
              </thead>
              <tbody>
              {% for row in section.items %}
                <tr>
                  <td>{{ row.item }}</td>
                  <td class="why">{{ row.why }}</td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      {% endfor %}
      <a class="btn btn-success" href="{{ url_for('diet_preferences') }}">Proceed to Recipe Preferences</a>
    {% else %}
      <div class="alert alert-info">Select a condition to view tailored restrictions.</div>
    {% endif %}
  </div>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</body>
</html>


